$(document).ready(function(){$(document.body).transition("init").show()}),function(a){function l(a){var b=a.indexOf("?");return b>0&&(a=a.slice(0,b)),a.replace(/[:\.\+\/]/g,"_")}function m(a){if(window.location.hash){var b=n(window.location.pathname,window.location.hash.slice(1));b.length&&(a=a.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+b+'$3"'),a=a.replace(/(\b(src|href|action))="(.+\/)?[^\/]+\/\.\.\//gi,'$1="$3'))}return a}function n(a,b){var c="",d=b.lastIndexOf("/");if(-1!=d&&(c=b.slice(0,d+1),"/"==c.charAt(0))){"/"==!a.charAt(0)&&(a="/"+a);var e=1;d=e;do d=c.indexOf("/",d)+1,d>e&&c.slice(0,d)==a.slice(0,d)&&(e=d);while(d>0&&d==e);var f="";d=e;do d=a.indexOf("/",d+1),-1!=d&&(f+="../");while(-1!=d);c=f+c.slice(e)}return c}var b=0,c=!1,d=null,e={},f=window.location.href,g={},h=null,i=[],j=0,k={options:function(b){d=a.extend({defaultPageTransition:"fade",domCache:!1},b)},init:function(k,m,n){c||(c=!0,a(document.body).transition("options",{}),a(window).on("hashchange",function(){var c=h&&h.element||a(document.body);if(!g[window.location.hash]){var e=window.location.hash,f=a("div.ui-page-active").attr("id");f&&(f="#"+f),h&&h.element&&h.element.is("form")&&(e={type:h.element.attr("method")||"get",url:window.location.hash.slice(1),data:h.element.serialize(),dataType:"html",global:!1});var k=null,l=null==h,m=0;if(l)i.length>j&&i[j].to==e?(h=i[j++],l=!1):j>0&&(h=i[--j],l=h?!h.reverse:!0),k=h?h.transition:d.defaultPageTransition,h&&(m=h.top||0,!e&&a(h.from).length&&(e=h.from));else if(h.transition)k=h.transition,i[j++]={to:e,from:f,transition:k,top:a(window).scrollTop()},l=h.reverse;else{k=h.element.attr("transition")||h.element.data("transition")||d.defaultPageTransition;var n=h.element.attr("direction")||h.element.data("direction");"reverse"===n&&(l=!0),i[j++]={to:e,from:f,transition:k,reverse:l,top:a(window).scrollTop()}}c.transition("changePage",e,k,l,m)}h=null}));var o=a('div[data-role="page"]',this);o.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+b),o=this):(o=a('<div data-role="page" id="_trans_div'+b+'" />'),this.children().wrapAll(o))),k&&o.trigger("pageload",k);var p=o.first();if(window.location.hash&&(p=a(l(window.location.hash)),!p.length)){p=o.first();var q=p.attr("id"),r=l(e[window.location.hash]||window.location.hash.slice(1));p.attr("id",r),q&&(a('[data-href="#'+q+'"]',o).attr("data-href","#"+r),a('[href="#'+q+'"]',o).attr("href","#"+r))}o.addClass("ui-page"),o.each(function(){a(this).attr("id")||a(this).attr("id","_trans_div"+b),e["#"+a(this).attr("id")]=f,a(this).css("zIndex",b++)}),a("a[href]",o).not("[target]").not('[rel="external"]').not('[data-ajax="false"]').not("[data-href]").transition("hijackLinks"),a("[data-href]",o).transition("hijackLinks"),a("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks"),n||(n=document.title),o.not("[data-title]").data("title",n),n=p.data("title"),n&&(document.title=n),o.hide();var s=m?a(m):null;return s=s||p,s.addClass("ui-page-active"),o.each(function(){a(this).trigger("pageinit",a(this))}),s},to:function(a,b,c){b=b||d.defaultPageTransition,c||(c=!1),h={transition:b,reverse:c},window.location.hash="#"+a},hijackLinks:function(){return this.each(function(){var b=a(this);if("back"==b.data("rel")){var c=function(a){window.history.back(),a.preventDefault()};return b.on("click",c),b.on("tap",c),void 0}var d=b.attr("data-href")||b.attr("href")||b.attr("action")||"#";if("#"===d.charAt(0)){if(a('a[name="'+d.slice(1)+'"]').length)return g[d]=!0,void 0}else d="#"+d,b.is("a")?b.attr("href",d):b.attr("action")&&b.attr("action",d),b.attr("data-href")&&b.attr("data-href",d);var c;b.is("a")?c=function(){h={element:b}}:b.is("form")?(c=function(a){h={element:b},window.location.href=d,a.preventDefault()},b.on("submit",c)):c=function(){h={element:b},window.location.href=d},b.is("form")||(b.on("click",c),b.on("tap",c))})},changePage:function(b,c,f,g){var h={toPage:b,back:f},i=a.Event("pagebeforechange");if(a(this).trigger(i,h),!i.defaultPrevented){b=h.toPage,f=h.back;var j="string"==typeof b?b:b.url,k=null,m=a("div.ui-page-active"),n=!1;if("string"==typeof b&&"#"===b.charAt(0)){var o=a(l(b));o.length?(a(this).transition("perform",m,o,c,f,g,h),n=!0):!d.domCache&&e[b]?(k=b,b=e[b]):b=b.slice(1)}if(!n){var p={href:j,element:a(this),back:f},i=a.Event("pagebeforeload");a(this).trigger(i,p);var q=a(this);i.defaultPrevented||(a(this).transition("load",b,p,function(b,d,e){var i=a('<div data-role="page-container" />');i.html(b),a(document.body).append(i);var j=a(i).transition("init",p,k,e);a(q).transition("perform",m,j,c,f,g,h)}),n=!0)}n||a(this).trigger("pagechangefailed",h)}},load:function(b,c,e){b="string"==typeof b?{url:b,dataType:"html",global:!1}:b,b.url||(b.url=window.location.href),b.success=function(g,h,i){c.xhr=i,c.textStatus=h,f=b.url,d.domCache||a('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable");var n,j=g.search(/<body/i),k=g,l=g;-1!=j&&(k=g.slice(0,j),j=g.indexOf(">",j),bodyEnd=g.search(/<\/body>/i),l=g.slice(j+1,bodyEnd));var o=k.match(/<title>(.+)<\/title>/im);o&&(n=o[1]),l=m(l),e(l,g,n)},b.error=function(d,e,f){c.xhr=d,c.textStatus=e,c.errorThrown=f,a(this).trigger("pageloadfailed",c),a(this).trigger("pagechangefailed",{toPage:b.url})},a.ajax(b)},perform:function(b,c,e,f,g,h){h.from=b,h.to=c,b.trigger("pagebeforehide",b),c.trigger("pagebeforeshow",c),window.setTimeout(function(){b.addClass(e+" out"),b.removeClass("ui-page-active");var a=c.position();c.css({top:a.top-g}),c.show(),c.addClass(e+" in"),c.addClass("ui-page-active"),f&&(b.addClass("reverse"),c.addClass("reverse"))},1),window.setTimeout(function(){b.removeClass(e+" out"),c.removeClass(e+" in"),b.removeClass("reverse"),c.removeClass("reverse"),c.css({top:0}),window.scrollTo(0,g);var f=c.data("title");f&&(document.title=f),b.trigger("pagehide",b),c.trigger("pageshow",c),a(document).trigger("pagechange",h),a('div[data-role="page"]').hide(),c.show(),d.domCache||(a("div.transition-recyclable").each(function(){var b=a.Event("pageremove");a(this).trigger(b,a(this)),b.defaultPrevented||a(this).remove()}),a('div[data-role="page-container"]').not(function(){return a(this).children().length}).remove())},707)}};a.fn.transition=function(a){if(k[a])return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)throw"Method "+a+" does not exist";return k.to.apply(this,arguments)}}(Zepto);